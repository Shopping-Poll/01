# Deploy & Run Guide

Panduan singkat untuk membuild dan mendeploy proyek ini (lokal atau ke layanan hosting seperti Vercel / Render / Heroku).

## Persyaratan

- Node.js 18+ recommended
- PostgreSQL database (Neon, Heroku Postgres, RDS, dsb.)
- Pastikan `DATABASE_URL` tersedia (lihat `.env`)

## Jalankan di lokal

1. Install dependensi:

```bash
npm install
```

2. Buat file `.env` di root (contoh sudah ada `.env`) berisi:

```
DATABASE_URL='postgresql://user:pass@host:port/dbname?sslmode=require'
```

3. Build client + server:

```bash
npm run build
```

4. Jalankan server:

```bash
npm run start
# atau langsung
# node dist/index.cjs
```

5. Buka browser: `http://localhost:5000` (atau port yang Anda set di `PORT` env).

## Deploy ke Vercel

1. Di dashboard Vercel buat project dari repo.
2. Set Build Command: `npm run build` dan Output Directory: `dist/public`.
3. Tambahkan Environment Variables di Vercel: `DATABASE_URL` dengan value yang sesuai.
4. Untuk server side, gunakan layanan seperti Render/Heroku/Vercel Serverless Functions â€” konfigurasi berbeda per platform.

## Deploy ke Render

1. Buat Web Service di Render.
2. Build Command: `npm run build`
3. Start Command: `npm run start`
4. Atur Environment Variable `DATABASE_URL` di settings service.


## CI / GitHub Actions (Render deploy)

Kami menambahkan workflow GitHub Actions yang akan membuild proyek dan memicu deploy di Render saat ada push ke branch `main`.

Langkah yang perlu Anda lakukan di GitHub repo:

1. Tambahkan repository secrets `RENDER_SERVICE_ID` (ID service Render Anda) dan `RENDER_API_KEY` (API key dari Render).
2. Pastikan service Render Anda terhubung ke repo atau dapat menerima deploy via API.

Workflow berada di `.github/workflows/deploy-render.yml` dan melakukan langkah:
- checkout
- `npm ci`
- `npm run build`
- POST ke `https://api.render.com/v1/services/$RENDER_SERVICE_ID/deploys` untuk memicu deploy

Jika Anda ingin saya juga membuat file `render.yaml` atau membantu mengambil `RENDER_SERVICE_ID`, beri tahu saya dan saya akan menuntun Anda melalui dashboard Render atau membuat file konfigurasi yang diperlukan.
## Deploy ke Heroku

1. Buat app di Heroku.
2. Tambahkan `DATABASE_URL` di Config Vars.
3. Atur Procfile (jika perlu):

```
web: npm run start
```

## Catatan tentang lingkungan sandbox

Jika Anda menjalankan di lingkungan yang membatasi pembuatan socket/listen (mis. beberapa sandbox online), server tidak akan dapat menjalankan `listen()` dan akan error dengan `ENOTSUP`. Jalankan pada mesin lokal atau hosting yang mendukung listening TCP.

## Troubleshooting

- Error `DATABASE_URL environment variable is not set`: pastikan `.env` ada dan berisi `DATABASE_URL`, atau set env var di hosting.
- Error `ENOTSUP` saat `listen`: ini merupakan pembatasan lingkungan; jalankan di mesin lokal atau hosting yang mendukung TCP listening.

Jika butuh saya siapkan panduan khusus untuk Vercel/Render (file konfigurasi), beri tahu layanan mana yang Anda pilih.

---
Generated by maintainer assistant to help deployment.
